

[TOC]



------



# 计算机系统概述

![image-20220526165354046](../images/image-20220526165354046.png)

## 操作系统的基本概念

### 操作系统的概念和特征

**操作系统** 是指 **控制和管理**整个计算机系统的硬件与软件资源，合理地**组织、调度**计算机的工作与资源的分配，进而为用户和其他软件**提供方便接口与环境**的**程序集合**。**操作系统是计算机系统中最基本的系统软件**
	
+ 计算机系统**自下而上**分为4部分：**硬件、操作系统、应用程序、用户** （划分与计算机组成原理不同）
	
+ 操作系统的特征 （**并发、共享、虚拟、异步**）
	
	+ 并发（**Concurrence**）
		+ 操作系统的并发性是通过 **分时** 得以实现的
	      + 并发：**同一时间间隔**
	        
		      > 9:00到9:30 吃饭，9:30到10:00 学习，则在 9:00到10:00这段间隔里面，吃饭与学习并发
	        
		    + 并行：**同一时刻**，并行性需要有相关硬件的支持，如**多流水线**、或 **多处理机硬件环境**
		
	+ 共享（**Sharing**）（**互斥共享方式** 与 **同时访问方式**）
		+ 指系统中的资源，可供内存中多个 **并发执行 **的进程共同使用
	      + 互斥共享方式
	        仅当进程访问完并释放该资源后，才允许另一个进程对该资源进行访问。
	        一段时间内，只允许一个进程访问的资源，称为 **临界资源** 或 **独占资源**。计算机系统中的**大多数物理设备** 及某些软件中所用的 **栈、变量和表格**，都属于 **临界资源**。
	      + 同时访问方式
	        允许在一段时间内由多个进程**“同时”访问**，“同时”是宏观概念，微观上，这些进程是 **交替地对该资源进行访问，即“分时共享”**。典型资源是 **磁盘设备**。
	
	        > 互斥共享 要求一种资源在一段时间内（哪怕是一段很小的时间）只能满足一个请求，否则就会出现严重问题。而 同时访问共享 通常要求一个请求分几个时间片段间隔地完成，其效果与连续完成的效果相同。
	
	   + **并发** 和 **共享** 是操作系统两个最基本的特征，两者之间互为存在的条件
	
	        + **资源共享**是以程序的并发为条件的，若系统不允许程序**并发执行**，则自然 **不存在资源共享问题**
	        + 若系统不能对**资源共享**实施有效的管理，则必将影响到程序的**并发执行**，甚至根本无法**并发执行**
	
	+ 虚拟（**Virtual**）
	   把一个物理上的实体，变为若干逻辑上的对应物。实现虚拟的技术，称为 **虚拟技术**，虚拟技术可归纳为 **时分复用技术** （处理器的分时共享） 和 **空分复用技术** （虚拟存储器）
	
	   + 虚拟处理器技术
	
	   	通过多道程序设计技术，让多道程序并发执行，来分时使用一个处理器
	
	   + 虚拟存储器技术
	
	   	将一台机器的物理存储器变为虚拟存储器，以便从逻辑上扩充存储器的容量
	
	   + 虚拟设备技术
	
		将一台物理I/O设备虚拟为多台逻辑上的I/O设备
	
	+ 异步（**Asynchronism**）
	   多道程序环境允许多个程序并发执行，但由于资源有限，进程的执行并不是一贯到底的，而是走走停停，它以不可预知的速度向前推进
	   
### 操作系统的目标和功能（**处理器管理、存储器管理、设备管理、文件管理、向用户提供接口、扩充机器**）

+ 操作系统作为计算机系统资源的管理者
	
	+ 处理器管理
		+ 多道程序环境下，处理机的分配和运行都以进程（**或线程**）为基本单位，因而对处理机的管理可归结为对进程的管理。
		+ 并发是指在计算机内**同时运行多个进程**，因而进程的**创建、撤销、管理、避免冲突、合理共享**就是 **进程管理** 的最主要任务。**进程管理**的主要功能包括 **进程控制、进程同步、进程通信、死锁处理、处理机调度** 等
	
	+ 存储器管理
		包括 **内存分配与回收、地址映射、内存保护与共享、内存扩充** 等功能
	+ 文件管理
		包括 **文件存储空间的管理、目录管理、文件读写管理和保护**
	+ 设备管理
		主要任务是 **完成用户的I/O请求，方便用户使用各种设备，提高设备的利用率**， 包括 **缓冲管理、设备分配、设备处理、虚拟设备** 等功能
	+ 操作系统作为用户与计算机硬件系统之间的接口（**命令接口、程序接口**）
		+ 命令接口
			+ 联机命令接口（**交互式命令接口**）
				适用于 **分时或实时系统** 的接口
	        + 脱机命令接口（**批处理命令接口**）
				适用于 **批处理系统**，脱机用户不能直接干预作业的运行。
		+ 程序接口
	        	由一组**系统调用（也称广义指令）**组成

## 操作系统的发展与分类

## 操作系统的运行环境

### 操作系统的运行机制

+ CPU通常执行两种不同性质的程序

  + 操作系统内核程序
  + 用户自编程序（即**系统外层的应用程序**，或简称**应用程序**）

+ **操作系统内核程序**是**用户自编程序**的管理者，因此内核程序要执行一些**特权指令**，而**用户自编程序**出于安全考虑不能执行这些指令。

+ 特权指令：**计算机中不允许用户直接使用的指令**，如**I/O**指令、**置中断**指令，存取用于内存保护的寄存器、送程序状态字到程序状态字寄存器等的指令。具体实现上，将CPU的状态划分为**用户态**（目态）和**核心态**（管态、内核态）。**用户自编程序**运行在**用户态**，**操作系统内核程序**运行在**核心态**。

+ 一些与硬件关联较紧密的模块，如**时钟管理**、**中断处理**、**设备驱动**等处于最低层。其次是运行频率较高的程序，如**进程管理**、**存储器管理**和**设备管理**等。这两部分内容构成了操作系统的内核。这部分内容的指令操作工作在**核心态**。

+ **内核**是计算机上配置的底层软件，是计算机功能的延伸，内核包含以下4方面内容

  + 时钟管理

    + 在计算机的各种部件中，**时钟**是最关键的设备。
    + 时钟的第一功能是**计时**，操作系统需要通过时钟管理，向用户提供标准的系统时间。
    + 通过**时钟中断**的管理，可以实现进程的切换。
      + 在**分时操作系统**中采用时间片轮转调度
      + 在**实时系统**中按截止时间控制运行
      + 在**批处理系统**中通过时钟管理来衡量一个作业的运行程度

  + 中断机制

    + 引入中断技术的初衷是**提高多道程序运行环境中CPU的利用率**，而且主要是针对外部设备。例如，键盘或鼠标信息的输入、进程的管理和调度、系统功能的调用、设备驱动、文件访问等。现在操作系统是靠**中断驱动**的软件。
    + 中断机制中，只有一小部分功能属于内核，它们负责**保护**和**恢复中断现场的信息**，**转移控制权**到相关的处理程序。这样可以**减少中断的处理时间**，提高系统的并行处理能力。

  + 原语

    + 把具有以下特点的程序称为**原语**
      + 处于操作系统的**最低层**，是最接近硬件的部分
      + 这些程序的运行具有**原子性**，其操作只能一气呵成（主要从系统安全性和便于管理考虑）
      + 这些程序的**运行时间都较短**，而且调用频繁
    + 定义原语的直接方法是**关闭中断**，让其所有动作不可分割地完成后再打开中断。
    + 系统中的**设备驱动、CPU切换、进程通信**等功能中的部分操作都可定义为**原语**，使它们成为内核的组成部分。

  + 系统控制的数据结构及处理

    + 系统中用来登记状态信息的数据结构很多，如**作业控制块、进程控制块（PCB）、设备控制块、各类链表、消息队列、缓冲区、空闲区登记表、内存分配表**

    + 为了实现**有效的管理**，系统需要一些基本的操作，常见的如下3种

      + 进程管理

        **进程状态管理**、**进程调度和分派**、**创建与撤销进程控制块**等。

## 操作系统的体系结构

## 总结

	// TODO

# 进程管理
## 进程与线程
## 处理机调度
## 进程同步
## 死锁
## 总结

# 内存管理
## 内存管理概念
## 虚拟内存管理

# 文件管理
## 文件系统基础
## 文件系统实现
## 磁盘组织与管理

# 输入/输出管理
## I/O管理概述
## I/O核心子系统
