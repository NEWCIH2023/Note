[TOC]

## 常见攻击方式


### IDOR

IDOR找到突破口的方式，当API端口无法突破IDOR脆弱性测试，可以通过HTML或者JavaScript文件寻找其他用户的HASH唯一身份值

> 很多企业应用的变量如 **id**、**pid**、**uid**等，虽然平常情况下只当作HTTP参数，但通过更改该值，可以达到访问、编辑或删除任何其他用户对象。

### SSRF

> Server Side Request Forgery (服务端请求伪造)。形成的原因主要是服务器端所提供的接口中包含了所要请求的内容的URL参数，并且未对客户端所传输过来的URL参数进行过滤。

这个漏洞造成的危害如下：

+ 对外网、服务器所在内网、本地进行端口扫描，获取一些服务的banner信息
+ 攻击运行在内网或本地的应用程序(比如溢出)
+ 对内网Web应用进行指纹识别，通过访问默认文件实现
+ 攻击内外网的Web应用，主要是使用GET请求参数就可以实现的攻击(比如Struts2漏洞利用，SQL注入等等)
+ 利用File协议读取本地文件

#### 绕过SSRF过滤的方法

##### 更改IP地址写法

**考虑到企业应用可能通过过滤掉内网IP的方式。这里可以使用各种进制替代原有IP写法，如以下192.168.0.1的各种进制**

+ 8进制。 0300.0250.0.1
+ 16进制。0xC0.0xA8.0.1
+ 10进制。3232235521
+ 16进制。0xC0A80001

##### 利用解析URL所出现的问题

**企业程序可能会对将要访问的URL进行解析，对解析出来的host地址进行过滤，这时候可能出现对URL参数解析不当，导致可以绕过过滤**

> 当解析出待访问URL是 **http://www.baidu.com@192.168.0.1/** 时，企业程序如果使用不正确的正则表达式(如截取http之后到com为止的内容)，导致该URL通过审核而进行访问，实际上该URL最终将访问 **http://192.168.0.1**


##### 利用DNS解析

##### 通过各种非HTTP协议


+ **GOPHER协议**。在URL参数中构造GET或POST请求，以达到攻击内网应用的目的，如对内网Redis服务进行攻击。
+ **File协议**。使用file协议可以避免服务端程序对于所访问的IP进行的过滤。如通过**file:///d:/1.txt**来访问

##### DNS Rebinding

对于用户请求的URL参数，首先服务器端会对其进行DNS解析，然后对于DNS服务器返回的IP地址进行判断，如果在黑名单中，就PASS掉。但是在整个过程中，第一次去请求DNS服务器进行域名解析到第二次服务端去请求URL之间存在一个时间差，利用这个时间差，可以进行DNS重绑定攻击。

